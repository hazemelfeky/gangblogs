(this.webpackJsonp1_dojo_blog=this.webpackJsonp1_dojo_blog||[]).push([[0],{35:function(e,t,c){},43:function(e,t,c){"use strict";c.r(t);var n=c(2),o=c.n(n),a=c(28),r=c.n(a),s=(c(35),c(11)),l=c(4),i=c(23),j=c.n(i),b=c(18),d=c(29),u=c(13),h=c(19);c(44);h.a.initializeApp({apiKey:"AIzaSyDwMg-AaQpdxI459MGPCEwxgUTvndzF-ko",authDomain:"dojo-blog-8c653.firebaseapp.com",databaseURL:"https://dojo-blog-8c653-default-rtdb.firebaseio.com",projectId:"dojo-blog-8c653",storageBucket:"dojo-blog-8c653.appspot.com",messagingSenderId:"30131984786",appId:"1:30131984786:web:3f76c60f2c295f3274c94b",measurementId:"G-CLT55QCLY1"});var O=h.a.firestore(),g=h.a.firestore.FieldValue.serverTimestamp,f=c(1),p=function(){var e=Object(l.f)(),t=Object(l.g)("id").id,c=Object(n.useState)({}),o=Object(u.a)(c,2),a=o[0],r=o[1];Object(n.useEffect)((function(){(function(){var e=Object(d.a)(j.a.mark((function e(){var c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=O.collection("blogs").doc(t),n={},e.next=4,c.get().then((function(e){e.exists?(console.log(e.data()),n=e.data(),r(Object(b.a)({},n))):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}));case 4:console.log(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);return Object(f.jsx)("div",{className:"blog-details",children:a&&Object(f.jsxs)("article",{children:[a.title&&Object(f.jsxs)("h2",{children:["Blog Detail -  ",a.title," "]}),a.author&&Object(f.jsxs)("p",{children:["Written by ",a.author]}),a.body&&Object(f.jsx)("p",{children:a.body}),Object(f.jsx)("button",{onClick:function(){O.collection("blogs").doc(t).delete().then((function(){console.log("Document successfully deleted!"),e.push("/")})).catch((function(e){console.error("Error removing document: ",e)}))},children:"delete"})]})})},x=function(e){var t=Object(n.useState)([]),c=Object(u.a)(t,2),o=c[0],a=c[1],r=Object(n.useState)(!0),s=Object(u.a)(r,2),l=s[0],i=s[1],j=Object(n.useState)(""),d=Object(u.a)(j,2),h=d[0],g=d[1];return Object(n.useEffect)((function(){var t=O.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){e.empty&&(console.log("empty snap"),g("No Blogs"),i(!1));var t=[];e.forEach((function(e){t.push(Object(b.a)(Object(b.a)({},e.data()),{},{id:e.id})),i(!1)})),a(t)}));return function(){return t()}}),[e]),{blogs:o,isPending:l,noBlogs:h}},m=function(e){var t=e.title,c=e.author;return Object(f.jsxs)("div",{className:"theblog",children:[Object(f.jsx)("h2",{children:t}),Object(f.jsxs)("p",{children:["Writen by ",c]})]})},v=function(){var e=x("blogs"),t=e.blogs,c=e.isPending,n=e.noBlogs;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Blog list"}),c&&Object(f.jsx)("p",{children:"Loading..."}),n&&Object(f.jsx)("p",{children:n}),t&&t.map((function(e){return Object(f.jsx)(s.b,{to:"/blogs/".concat(e.id),className:"remove-link-style",children:Object(f.jsx)(m,{title:e.title,author:e.author})},e.id)}))]})},y=function(){return Object(f.jsxs)("nav",{className:"navbar",children:[Object(f.jsx)("h1",{children:"The Gang Blog"}),Object(f.jsxs)("div",{className:"links",children:[Object(f.jsx)(s.b,{to:"/",children:"Home"}),Object(f.jsx)(s.b,{to:"/create",style:{backgroundColor:"#f2345f",borderRadius:8,color:"#fff",padding:5},children:"New Blog"})]})]})},B=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),c=t[0],o=t[1],a=Object(n.useState)(""),r=Object(u.a)(a,2),s=r[0],i=r[1],j=Object(n.useState)("reda"),b=Object(u.a)(j,2),d=b[0],h=b[1],p=Object(n.useState)(!1),x=Object(u.a)(p,2),m=x[0],v=x[1],y=Object(l.f)(),B={title:c,body:s,author:d,createdAt:g()},S=function(e){e.preventDefault(),v(!0),O.collection("blogs").add(B).then((function(){v(!1),y.push("/")})).catch((function(e){alert(e.message),v(!1)}))};return Object(f.jsxs)("div",{className:"new-blog",children:[Object(f.jsx)("h2",{children:"New Blog"}),Object(f.jsxs)("form",{children:[Object(f.jsx)("label",{children:"Blog title:"}),Object(f.jsx)("input",{type:"text",value:c,onChange:function(e){return o(e.target.value)}}),Object(f.jsx)("label",{children:"Blog body:"}),Object(f.jsx)("textarea",{value:s,onChange:function(e){return i(e.target.value)}}),Object(f.jsx)("label",{children:"Blog auther:"}),Object(f.jsx)("input",{type:"text",value:d,onChange:function(e){return h(e.target.value)}}),!m&&Object(f.jsx)("button",{onClick:S,children:"Add Blog"}),m&&Object(f.jsx)("button",{onClick:S,children:"Adding Blog..."})]})]})},S=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Sorry"}),Object(f.jsx)("p",{children:"This page is not found"}),Object(f.jsx)(s.b,{to:"/",children:"Go home.."})]})},k=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)(s.a,{children:[Object(f.jsx)(y,{}),Object(f.jsxs)(l.c,{children:[Object(f.jsx)(l.a,{path:"/create",component:B}),Object(f.jsx)(l.a,{path:"/blogs/:id",component:p}),Object(f.jsx)(l.a,{exact:!0,path:"/",component:v}),Object(f.jsx)(l.a,{exact:!0,path:"*",component:S})]})]})})};r.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(k,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.f2f78045.chunk.js.map